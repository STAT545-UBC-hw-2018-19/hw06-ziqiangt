---
title: "hw06"
author: "ziqiangt"
date: "2018/11/05"
output:
  html_document:
    keep_md: true
    toc: yes
---
## Introduction
This is the first assignment of STAT 547M (despite it being named Homework 06).

First, let's load the used data

```r
suppressPackageStartupMessages(library(gapminder))
suppressPackageStartupMessages(library(tidyverse))
suppressPackageStartupMessages(library(stringr))
suppressPackageStartupMessages(library(testthat))
suppressPackageStartupMessages(library(stringi))
```


## 1.Character data
### 14.2.5 Exercises
####Q1
In code that doesn’t use stringr, you’ll often see paste() and paste0(). What’s the difference between the two functions? 
Answer: paste() allows us to add an separator between strings while paste0() dose not. Here is an example:

```r
paste("Task", "1", sep = "-")
```

```
## [1] "Task-1"
```

```r
paste0("Task", "1")
```

```
## [1] "Task1"
```

What stringr function are they equivalent to? How do the functions differ in their handling of NA?
Answer: paste() and paste0() equivalent to str_c(). Here is an example:

```r
str_c("Task", "1", sep = "-") 
```

```
## [1] "Task-1"
```

```r
str_c("Task", "1", sep = "")
```

```
## [1] "Task1"
```

How do the functions differ in their handling of NA?
Answer: NA is converted to a string "NA" in paste() and paste0(). However, if NA is one of the input strings for str_c(), the output of str_c() will be NA. Here is an example:

```r
paste("Look ", NA, sep = "")
```

```
## [1] "Look NA"
```

```r
paste0("Look ", NA)
```

```
## [1] "Look NA"
```

```r
str_c("Look ", NA)
```

```
## [1] NA
```

####Q2
In your own words, describe the difference between the sep and collapse arguments to str_c().
Answer:"sep" is used to seperate a vector of strings and keep the vector format. While "collapse" to a vector of strings into a single string. Here is an example:

```r
str_c(c("x", "y", "z"), c("a", "b", "c"), sep = ": ")
```

```
## [1] "x: a" "y: b" "z: c"
```

```r
str_c(c("x", "y", "z"), c("a", "b", "c"), collapse = ":")
```

```
## [1] "xa:yb:zc"
```

####Q3
Use str_length() and str_sub() to extract the middle character from a string. What will you do if the string has an even number of characters?
Answer:First, we need to use str_length to obtain the middle index. Then use str_sub to output the middle character. Here is the example:

```r
odd_string <- "eye"

# A function to find the middle index
find_middle <- function(input) {
  return(str_length(input) / 2 + 1)
}

# Obtain the middle index and output the midelle character
odd_index <- find_middle(odd_string) 
str_sub(odd_string, odd_index, odd_index)
```

```
## [1] "y"
```

What will you do if the string has an even number of characters?
Answer: We need to modify the str_sub. Because there are two middle characters now. Here is an modified example:

```r
even_string <- "eyne"

# A function to find the middle index
find_middle_even <- function(input) {
  return(str_length(input) / 2 + 1 )
}

# Obtain the middle index and output the midelle character
even_index <- find_middle_even(even_string) 
str_sub(even_string, even_index-1, even_index)
```

```
## [1] "yn"
```


####Q4
What does str_wrap() do? When might you want to use it?
Answer: str_wrap() tries to implement the Knuth-Plass paragraph wrapping algorithm. It might be used when we need to sperate a long paragraph into multiple lines. Here is an example:

```r
# a long sentence 
paragraph <- "One or more elements are missing or sketchy. Missed opportunities to complement code and numbers with a figure and interpretation. Technical problem that is relatively easy to fix. It’s hard to find the report in this crazy repo."

# view without wrap
cat(paragraph)
```

```
## One or more elements are missing or sketchy. Missed opportunities to complement code and numbers with a figure and interpretation. Technical problem that is relatively easy to fix. It’s hard to find the report in this crazy repo.
```

```r
# view with wrap
cat(str_wrap(paragraph), sep = "\n")
```

```
## One or more elements are missing or sketchy. Missed opportunities to complement
## code and numbers with a figure and interpretation. Technical problem that is
## relatively easy to fix. It’s hard to find the report in this crazy repo.
```

####Q5
What does str_trim() do? 
Answer: str_trim() removes whitespace from start and end of string. 

```r
# before removing whitespace from start and end of string
spaces_string = "  I am  "
spaces_string
```

```
## [1] "  I am  "
```

```r
# After using str_trim() 
no_spaces_string <- str_trim(spaces_string)
no_spaces_string
```

```
## [1] "I am"
```

What’s the opposite of str_trim()?
Answer: The opposite is str_pad() which is used to add whitespace. Here is an example to combine neighborhood character of letters.

```r
letters %>%
  .[1:10] %>% 
  str_pad(width = 2, side = "right") %>%
  str_c(letters[2:11])
```

```
##  [1] "a b" "b c" "c d" "d e" "e f" "f g" "g h" "h i" "i j" "j k"
```

Write a function that turns (e.g.) a vector c("a", "b", "c") into the string a, b, and c. Think carefully about what it should do if given a vector of length 0, 1, or 2.

```r
vector_to_string <- function(v) {
  if (length(v) == 0){
    return("")
  }
  else if (length(v) == 1){
    return(v)
  }
  else{
    front <- str_c(v[-length(v)], collapse = ", ")
    whole <- str_c(front, v[length(v)], sep = " and ")
    return(whole)
  }
}

#begin to test
vector_to_string(c(""))
```

```
## [1] ""
```

```r
vector_to_string(c("a"))
```

```
## [1] "a"
```

```r
vector_to_string(c("a", "b"))
```

```
## [1] "a and b"
```

```r
vector_to_string(c("a", "b","c"))
```

```
## [1] "a, b and c"
```

### 14.3.1.1 Exercises
#### Q1
Explain why each of these strings don’t match a \: "\", "\\", "\\\"?

symbol | Definition
----------------|------------------
   `\`      |  used as an escape character in regular expressions
   `\\`     | trated as a symbol "\"
   `\\\`    | a back slash + an escape character
   
Here is an example:

```r
test <- "I\\AM"

str_view(test, pattern = "\\\\", match = TRUE)
```

<!--html_preserve--><div id="htmlwidget-4fab6198beabe79d1594" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-4fab6198beabe79d1594">{"x":{"html":"<ul>\n  <li>I<span class='match'>\\<\/span>AM<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

####Q2
How would you match the sequence "'\?
Answer: Both ' and \ need to be escaped in regex.

```r
test <- "I'\\AM"

str_view(test, pattern = "\\'\\\\", match = TRUE)
```

<!--html_preserve--><div id="htmlwidget-aa851b2b63940f4e0b2f" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-aa851b2b63940f4e0b2f">{"x":{"html":"<ul>\n  <li>I<span class='match'>'\\<\/span>AM<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

####Q3
What patterns will the regular expression \..\..\.. match? How would you represent it as a string?
Answer: It match ".anycharacter.anycharacter.anycharacter"

```r
test <- "I.A.M.z...xxx"

str_view(test, pattern = "\\..\\..\\..", match = TRUE)
```

<!--html_preserve--><div id="htmlwidget-990a4343b32493ec7e7c" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-990a4343b32493ec7e7c">{"x":{"html":"<ul>\n  <li>I<span class='match'>.A.M.z<\/span>...xxx<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

### 14.3.2.1 Exercises
####Q1
How would you match the literal string "$^$"?
Answer: Both $ and ^ need to be escaped in regex.

```r
test <- "$^$, $$sssa"
str_view(test, pattern = "\\$\\^\\ $", match = TRUE)
```

<!--html_preserve--><div id="htmlwidget-d359bd0b465c482150ed" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-d359bd0b465c482150ed">{"x":{"html":"<ul>\n  <li><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

####Q2
Given the corpus of common words in stringr::words, create regular expressions that find all words that:

Start with “y”.

```r
str_view(stringr::words, pattern = "^y", match = TRUE)
```

<!--html_preserve--><div id="htmlwidget-8319bd2333b3ce4701ce" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-8319bd2333b3ce4701ce">{"x":{"html":"<ul>\n  <li><span class='match'>y<\/span>ear<\/li>\n  <li><span class='match'>y<\/span>es<\/li>\n  <li><span class='match'>y<\/span>esterday<\/li>\n  <li><span class='match'>y<\/span>et<\/li>\n  <li><span class='match'>y<\/span>ou<\/li>\n  <li><span class='match'>y<\/span>oung<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

End with “x”.

```r
str_view(stringr::words, pattern = "x$", match = TRUE)
```

<!--html_preserve--><div id="htmlwidget-7f22a3ea13f26ed41c22" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-7f22a3ea13f26ed41c22">{"x":{"html":"<ul>\n  <li>bo<span class='match'>x<\/span><\/li>\n  <li>se<span class='match'>x<\/span><\/li>\n  <li>si<span class='match'>x<\/span><\/li>\n  <li>ta<span class='match'>x<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

Are exactly three letters long. (Don’t cheat by using str_length()!)

```r
#There are too many matched words
#let's narrow down the search range to the head 20 words
str_view(stringr::words[1:20], pattern = "^.{3}$", match = TRUE)
```

<!--html_preserve--><div id="htmlwidget-88e0151681cb7a33baa1" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-88e0151681cb7a33baa1">{"x":{"html":"<ul>\n  <li><span class='match'>act<\/span><\/li>\n  <li><span class='match'>add<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

Have seven letters or more.

```r
#There are too many matched words
#let's narrow down the search range to the head 20 words
str_view(stringr::words[1:20], pattern = "^.{7,}$", match = TRUE)
```

<!--html_preserve--><div id="htmlwidget-630efef4f02fa9a76a94" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-630efef4f02fa9a76a94">{"x":{"html":"<ul>\n  <li><span class='match'>absolute<\/span><\/li>\n  <li><span class='match'>account<\/span><\/li>\n  <li><span class='match'>achieve<\/span><\/li>\n  <li><span class='match'>address<\/span><\/li>\n  <li><span class='match'>advertise<\/span><\/li>\n  <li><span class='match'>afternoon<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

###Exercises 14.3.3.1
####Q1
Create regular expressions to find all words that:

Start with a vowel.

```r
str_view(stringr::words, pattern = "^[aeiou]|[AEIOU]", match = TRUE)
```

<!--html_preserve--><div id="htmlwidget-975267d6b9f6e400b8b7" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-975267d6b9f6e400b8b7">{"x":{"html":"<ul>\n  <li><span class='match'>a<\/span><\/li>\n  <li><span class='match'>a<\/span>ble<\/li>\n  <li><span class='match'>a<\/span>bout<\/li>\n  <li><span class='match'>a<\/span>bsolute<\/li>\n  <li><span class='match'>a<\/span>ccept<\/li>\n  <li><span class='match'>a<\/span>ccount<\/li>\n  <li><span class='match'>a<\/span>chieve<\/li>\n  <li><span class='match'>a<\/span>cross<\/li>\n  <li><span class='match'>a<\/span>ct<\/li>\n  <li><span class='match'>a<\/span>ctive<\/li>\n  <li><span class='match'>a<\/span>ctual<\/li>\n  <li><span class='match'>a<\/span>dd<\/li>\n  <li><span class='match'>a<\/span>ddress<\/li>\n  <li><span class='match'>a<\/span>dmit<\/li>\n  <li><span class='match'>a<\/span>dvertise<\/li>\n  <li><span class='match'>a<\/span>ffect<\/li>\n  <li><span class='match'>a<\/span>fford<\/li>\n  <li><span class='match'>a<\/span>fter<\/li>\n  <li><span class='match'>a<\/span>fternoon<\/li>\n  <li><span class='match'>a<\/span>gain<\/li>\n  <li><span class='match'>a<\/span>gainst<\/li>\n  <li><span class='match'>a<\/span>ge<\/li>\n  <li><span class='match'>a<\/span>gent<\/li>\n  <li><span class='match'>a<\/span>go<\/li>\n  <li><span class='match'>a<\/span>gree<\/li>\n  <li><span class='match'>a<\/span>ir<\/li>\n  <li><span class='match'>a<\/span>ll<\/li>\n  <li><span class='match'>a<\/span>llow<\/li>\n  <li><span class='match'>a<\/span>lmost<\/li>\n  <li><span class='match'>a<\/span>long<\/li>\n  <li><span class='match'>a<\/span>lready<\/li>\n  <li><span class='match'>a<\/span>lright<\/li>\n  <li><span class='match'>a<\/span>lso<\/li>\n  <li><span class='match'>a<\/span>lthough<\/li>\n  <li><span class='match'>a<\/span>lways<\/li>\n  <li><span class='match'>a<\/span>merica<\/li>\n  <li><span class='match'>a<\/span>mount<\/li>\n  <li><span class='match'>a<\/span>nd<\/li>\n  <li><span class='match'>a<\/span>nother<\/li>\n  <li><span class='match'>a<\/span>nswer<\/li>\n  <li><span class='match'>a<\/span>ny<\/li>\n  <li><span class='match'>a<\/span>part<\/li>\n  <li><span class='match'>a<\/span>pparent<\/li>\n  <li><span class='match'>a<\/span>ppear<\/li>\n  <li><span class='match'>a<\/span>pply<\/li>\n  <li><span class='match'>a<\/span>ppoint<\/li>\n  <li><span class='match'>a<\/span>pproach<\/li>\n  <li><span class='match'>a<\/span>ppropriate<\/li>\n  <li><span class='match'>a<\/span>rea<\/li>\n  <li><span class='match'>a<\/span>rgue<\/li>\n  <li><span class='match'>a<\/span>rm<\/li>\n  <li><span class='match'>a<\/span>round<\/li>\n  <li><span class='match'>a<\/span>rrange<\/li>\n  <li><span class='match'>a<\/span>rt<\/li>\n  <li><span class='match'>a<\/span>s<\/li>\n  <li><span class='match'>a<\/span>sk<\/li>\n  <li><span class='match'>a<\/span>ssociate<\/li>\n  <li><span class='match'>a<\/span>ssume<\/li>\n  <li><span class='match'>a<\/span>t<\/li>\n  <li><span class='match'>a<\/span>ttend<\/li>\n  <li><span class='match'>a<\/span>uthority<\/li>\n  <li><span class='match'>a<\/span>vailable<\/li>\n  <li><span class='match'>a<\/span>ware<\/li>\n  <li><span class='match'>a<\/span>way<\/li>\n  <li><span class='match'>a<\/span>wful<\/li>\n  <li><span class='match'>e<\/span>ach<\/li>\n  <li><span class='match'>e<\/span>arly<\/li>\n  <li><span class='match'>e<\/span>ast<\/li>\n  <li><span class='match'>e<\/span>asy<\/li>\n  <li><span class='match'>e<\/span>at<\/li>\n  <li><span class='match'>e<\/span>conomy<\/li>\n  <li><span class='match'>e<\/span>ducate<\/li>\n  <li><span class='match'>e<\/span>ffect<\/li>\n  <li><span class='match'>e<\/span>gg<\/li>\n  <li><span class='match'>e<\/span>ight<\/li>\n  <li><span class='match'>e<\/span>ither<\/li>\n  <li><span class='match'>e<\/span>lect<\/li>\n  <li><span class='match'>e<\/span>lectric<\/li>\n  <li><span class='match'>e<\/span>leven<\/li>\n  <li><span class='match'>e<\/span>lse<\/li>\n  <li><span class='match'>e<\/span>mploy<\/li>\n  <li><span class='match'>e<\/span>ncourage<\/li>\n  <li><span class='match'>e<\/span>nd<\/li>\n  <li><span class='match'>e<\/span>ngine<\/li>\n  <li><span class='match'>e<\/span>nglish<\/li>\n  <li><span class='match'>e<\/span>njoy<\/li>\n  <li><span class='match'>e<\/span>nough<\/li>\n  <li><span class='match'>e<\/span>nter<\/li>\n  <li><span class='match'>e<\/span>nvironment<\/li>\n  <li><span class='match'>e<\/span>qual<\/li>\n  <li><span class='match'>e<\/span>special<\/li>\n  <li><span class='match'>e<\/span>urope<\/li>\n  <li><span class='match'>e<\/span>ven<\/li>\n  <li><span class='match'>e<\/span>vening<\/li>\n  <li><span class='match'>e<\/span>ver<\/li>\n  <li><span class='match'>e<\/span>very<\/li>\n  <li><span class='match'>e<\/span>vidence<\/li>\n  <li><span class='match'>e<\/span>xact<\/li>\n  <li><span class='match'>e<\/span>xample<\/li>\n  <li><span class='match'>e<\/span>xcept<\/li>\n  <li><span class='match'>e<\/span>xcuse<\/li>\n  <li><span class='match'>e<\/span>xercise<\/li>\n  <li><span class='match'>e<\/span>xist<\/li>\n  <li><span class='match'>e<\/span>xpect<\/li>\n  <li><span class='match'>e<\/span>xpense<\/li>\n  <li><span class='match'>e<\/span>xperience<\/li>\n  <li><span class='match'>e<\/span>xplain<\/li>\n  <li><span class='match'>e<\/span>xpress<\/li>\n  <li><span class='match'>e<\/span>xtra<\/li>\n  <li><span class='match'>e<\/span>ye<\/li>\n  <li><span class='match'>i<\/span>dea<\/li>\n  <li><span class='match'>i<\/span>dentify<\/li>\n  <li><span class='match'>i<\/span>f<\/li>\n  <li><span class='match'>i<\/span>magine<\/li>\n  <li><span class='match'>i<\/span>mportant<\/li>\n  <li><span class='match'>i<\/span>mprove<\/li>\n  <li><span class='match'>i<\/span>n<\/li>\n  <li><span class='match'>i<\/span>nclude<\/li>\n  <li><span class='match'>i<\/span>ncome<\/li>\n  <li><span class='match'>i<\/span>ncrease<\/li>\n  <li><span class='match'>i<\/span>ndeed<\/li>\n  <li><span class='match'>i<\/span>ndividual<\/li>\n  <li><span class='match'>i<\/span>ndustry<\/li>\n  <li><span class='match'>i<\/span>nform<\/li>\n  <li><span class='match'>i<\/span>nside<\/li>\n  <li><span class='match'>i<\/span>nstead<\/li>\n  <li><span class='match'>i<\/span>nsure<\/li>\n  <li><span class='match'>i<\/span>nterest<\/li>\n  <li><span class='match'>i<\/span>nto<\/li>\n  <li><span class='match'>i<\/span>ntroduce<\/li>\n  <li><span class='match'>i<\/span>nvest<\/li>\n  <li><span class='match'>i<\/span>nvolve<\/li>\n  <li><span class='match'>i<\/span>ssue<\/li>\n  <li><span class='match'>i<\/span>t<\/li>\n  <li><span class='match'>i<\/span>tem<\/li>\n  <li><span class='match'>o<\/span>bvious<\/li>\n  <li><span class='match'>o<\/span>ccasion<\/li>\n  <li><span class='match'>o<\/span>dd<\/li>\n  <li><span class='match'>o<\/span>f<\/li>\n  <li><span class='match'>o<\/span>ff<\/li>\n  <li><span class='match'>o<\/span>ffer<\/li>\n  <li><span class='match'>o<\/span>ffice<\/li>\n  <li><span class='match'>o<\/span>ften<\/li>\n  <li><span class='match'>o<\/span>kay<\/li>\n  <li><span class='match'>o<\/span>ld<\/li>\n  <li><span class='match'>o<\/span>n<\/li>\n  <li><span class='match'>o<\/span>nce<\/li>\n  <li><span class='match'>o<\/span>ne<\/li>\n  <li><span class='match'>o<\/span>nly<\/li>\n  <li><span class='match'>o<\/span>pen<\/li>\n  <li><span class='match'>o<\/span>perate<\/li>\n  <li><span class='match'>o<\/span>pportunity<\/li>\n  <li><span class='match'>o<\/span>ppose<\/li>\n  <li><span class='match'>o<\/span>r<\/li>\n  <li><span class='match'>o<\/span>rder<\/li>\n  <li><span class='match'>o<\/span>rganize<\/li>\n  <li><span class='match'>o<\/span>riginal<\/li>\n  <li><span class='match'>o<\/span>ther<\/li>\n  <li><span class='match'>o<\/span>therwise<\/li>\n  <li><span class='match'>o<\/span>ught<\/li>\n  <li><span class='match'>o<\/span>ut<\/li>\n  <li><span class='match'>o<\/span>ver<\/li>\n  <li><span class='match'>o<\/span>wn<\/li>\n  <li><span class='match'>u<\/span>nder<\/li>\n  <li><span class='match'>u<\/span>nderstand<\/li>\n  <li><span class='match'>u<\/span>nion<\/li>\n  <li><span class='match'>u<\/span>nit<\/li>\n  <li><span class='match'>u<\/span>nite<\/li>\n  <li><span class='match'>u<\/span>niversity<\/li>\n  <li><span class='match'>u<\/span>nless<\/li>\n  <li><span class='match'>u<\/span>ntil<\/li>\n  <li><span class='match'>u<\/span>p<\/li>\n  <li><span class='match'>u<\/span>pon<\/li>\n  <li><span class='match'>u<\/span>se<\/li>\n  <li><span class='match'>u<\/span>sual<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

That only contain consonants.

```r
str_view(stringr::words, pattern = "^[^aeiou]{1,}$", match = TRUE)
```

<!--html_preserve--><div id="htmlwidget-613088e765fbaafa27a2" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-613088e765fbaafa27a2">{"x":{"html":"<ul>\n  <li><span class='match'>by<\/span><\/li>\n  <li><span class='match'>dry<\/span><\/li>\n  <li><span class='match'>fly<\/span><\/li>\n  <li><span class='match'>mrs<\/span><\/li>\n  <li><span class='match'>try<\/span><\/li>\n  <li><span class='match'>why<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

End with ed, but not with eed.

```r
str_view(stringr::words, pattern = "[^e]e{1}d$", match = TRUE)
```

<!--html_preserve--><div id="htmlwidget-a3f3459556c4c4667c0f" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-a3f3459556c4c4667c0f">{"x":{"html":"<ul>\n  <li><span class='match'>bed<\/span><\/li>\n  <li>hund<span class='match'>red<\/span><\/li>\n  <li><span class='match'>red<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

End with ing or ise.

```r
str_view(stringr::words, pattern = "ing|ise$", match = TRUE)
```

<!--html_preserve--><div id="htmlwidget-6e3aa2a4a5fba0c3ee93" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-6e3aa2a4a5fba0c3ee93">{"x":{"html":"<ul>\n  <li>advert<span class='match'>ise<\/span><\/li>\n  <li>br<span class='match'>ing<\/span><\/li>\n  <li>dur<span class='match'>ing<\/span><\/li>\n  <li>even<span class='match'>ing<\/span><\/li>\n  <li>exerc<span class='match'>ise<\/span><\/li>\n  <li>k<span class='match'>ing<\/span><\/li>\n  <li>mean<span class='match'>ing<\/span><\/li>\n  <li>morn<span class='match'>ing<\/span><\/li>\n  <li>otherw<span class='match'>ise<\/span><\/li>\n  <li>pract<span class='match'>ise<\/span><\/li>\n  <li>ra<span class='match'>ise<\/span><\/li>\n  <li>real<span class='match'>ise<\/span><\/li>\n  <li>r<span class='match'>ing<\/span><\/li>\n  <li>r<span class='match'>ise<\/span><\/li>\n  <li>s<span class='match'>ing<\/span><\/li>\n  <li>s<span class='match'>ing<\/span>le<\/li>\n  <li>surpr<span class='match'>ise<\/span><\/li>\n  <li>th<span class='match'>ing<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

####Q2
Empirically verify the rule “i before e except after c”.

```r
# Rule “i before e except after c
high_subset <- str_subset(stringr::words, pattern = "[^c]ie|cei")
high_subset %>% knitr::kable()
```



|x          |
|:----------|
|achieve    |
|believe    |
|brief      |
|client     |
|die        |
|experience |
|field      |
|friend     |
|lie        |
|piece      |
|quiet      |
|receive    |
|tie        |
|view       |

```r
# The one which obey the rule
low_subset <- str_subset(stringr::words, pattern = "cie|[^c]ei")
low_subset %>% knitr::kable()
```



|x       |
|:-------|
|science |
|society |
|weigh   |

```r
# Test
if(length(high_subset) > length(low_subset))
  "Rule is correct"
```

```
## [1] "Rule is correct"
```

s “q” always followed by a “u”?

```r
#Find the words q is not followed by u
q_followed_u <- str_subset(stringr::words, pattern = "q[^u]")

#Test
test_that("“q” always followed by a “u”", {
  expect_more_than(1, length(q_followed_u))
})
```

Answer: Test passed

####Q4
Write a regular expression that matches a word if it’s probably written in British English, not American English.
Answer: According to [oxfordinternationalenglish](https://www.oxfordinternationalenglish.com/differences-in-british-and-american-spelling/),British English words ending in ‘our’ usually end in ‘or’ in American English. Here is an example:

```r
# Test vectors
test_words <- c("colour", "flavor", "humour", "labor", "neighbour")

# View results
str_view(test_words, pattern = "our", match = TRUE)
```

<!--html_preserve--><div id="htmlwidget-16ae6da63e00de529711" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-16ae6da63e00de529711">{"x":{"html":"<ul>\n  <li>col<span class='match'>our<\/span><\/li>\n  <li>hum<span class='match'>our<\/span><\/li>\n  <li>neighb<span class='match'>our<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

####Q5
Create a regular expression that will match telephone numbers as commonly written in your country.
Answer: In my country, China, the telephone number starts with +86 and have 11 digits (except +86) in total. 

```r
# Test vectors
test_words <- c("+8613777705661", "+16044888876", "+1605888876", "+861377770566")

# View results
str_view(test_words, pattern = "^\\+86[0-9]{11}", match = TRUE)
```

<!--html_preserve--><div id="htmlwidget-b4c0a06fc4f7410a5b69" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-b4c0a06fc4f7410a5b69">{"x":{"html":"<ul>\n  <li><span class='match'>+8613777705661<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

###Exercises 14.3.4.1
